<div class="cover pt-extra flex-row items-start">
    <aside class="full-column w-2">
        <a href="" class="btn btn-primary full-row text-center" ng-click="departmentCtrl.status.addingDepartments = !departmentCtrl.status.addingDepartments">添加科室</a>
        <ul class="categories-list">
            <li class="category-item" ng-mouseenter="departmentCtrl.metas.activeCategoryIndex = $index;" ng-class="{active: departmentCtrl.metas.activeCategoryIndex == $index}" ng-repeat="(category,departments) in departmentCtrl.departments">{{category}}</li>
        </ul>
    </aside>
    <div class="full-column w-8 relative departments-list-container">
        <div class="cover container-auto absolute left top" ng-show="departmentCtrl.metas.activeCategoryIndex == $index;" ng-repeat="(category, departments) in departmentCtrl.departments">
            <table class="table table-bordered table-hover">
                <thead>
                    <tr>
                        <th><input type="checkbox"></th>
                        <th>科室名称</th>
                        <th>医生数量</th>
                        <th>描述</th>
                    </tr>
                </thead>
                <tbody>
                    <tr  ng-repeat="department in departments">
                        <td><input type="checkbox"></td>
                        <td>{{department.name}}</td>
                        <td>{{department.doctor_amount || '0'}}</td>
                        <td>{{department.description | limitTo: 20}}</td>
                    </tr>
                </tbody>
                
            </table>
        </div>
        <div class="absolute container-auto cover top left add-departments-panel scale" ng-class="{active: departmentCtrl.status.addingDepartments}">
            <table class="table table-bordered table-hover">
                <thead>
                    <tr>
                        <th class="w-1">科室类别</th>
                        <th class="w-1">科室名称</th>
                        <th class="w-8">描述</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td colspan="3">
                        <div class="flex-row">
                            <a href="" class="btn btn-default flex-1" ng-click="departmentCtrl.addDepartment()">添加＋</a>
                            <a href="" class="btn btn-default ml-extra flex-1" ng-click="departmentCtrl.submitNewDepartments()" ng-disabled="!departmentCtrl.temps.departmentToAdd">保存</a>
                        </div>
                    </td></tr>
                    <tr ng-show="departmentCtrl.temps.departmentToAdd">
                        <td><input type="text" ng-model="departmentCtrl.temps.departmentToAdd.category"></td>
                        <td><input type="text" ng-model="departmentCtrl.temps.departmentToAdd.name"></td>
                        <td><textarea class="w-10" ng-model="departmentCtrl.temps.departmentToAdd.description"></textarea></td>
                    </tr>
                    <tr ng-repeat="department in departmentCtrl.temps.departments">
                        <td><input type="text" ng-model="department.category"></td>
                        <td><input type="text" ng-model="department.name"></td>
                        <td><textarea class="w-10" ng-model="department.description"></textarea></td>
                    </tr>
                </tbody>
            </table>
            
        </div>
    </div>
</div>